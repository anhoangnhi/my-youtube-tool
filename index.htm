<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Ultimate Tool | Fix Thumbnail</title>
    <style>
        :root { --primary: #ff0000; --bg: #0f0f0f; --card: #1a1a1a; --text: #ffffff; }
        body { background-color: var(--bg); color: var(--text); font-family: sans-serif; display: flex; justify-content: center; padding: 20px; }
        .container { width: 100%; max-width: 850px; background: var(--card); padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.7); }
        h1 { color: var(--primary); text-align: center; }
        .input-box { display: flex; gap: 10px; margin-bottom: 25px; }
        input { flex: 1; padding: 15px; border-radius: 10px; border: 1px solid #333; background: #252525; color: #fff; outline: none; }
        button { padding: 0 25px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        #player-wrapper { width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 15px; overflow: hidden; margin-bottom: 25px; }
        .tools-area { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .panel { background: #252525; padding: 20px; border-radius: 12px; text-align: center; }
        select { width: 100%; padding: 12px; background: #333; color: #fff; border: none; border-radius: 8px; }
        #thumb-img { width: 100%; border-radius: 8px; display: none; margin-top: 10px; cursor: pointer; }
        .btn-link { display: none; margin-top: 15px; color: #3ea6ff; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>YouTube Ultimate Tool</h1>
    <div class="input-box">
        <input type="text" id="video-url" placeholder="D√°n link video YouTube v√†o ƒë√¢y...">
        <button onclick="processVideo()">CH·∫†Y</button>
    </div>

    <div id="player-wrapper"><div id="player"></div></div>

    <div class="tools-area">
        <div class="panel">
            <label>‚ö° T·ªëc ƒë·ªô ph√°t</label>
            <select id="speed-picker" onchange="applySpeed()">
                <option value="1" selected>1.0x (Normal)</option>
                <option value="2">2.0x</option>
                <option value="4">4.0x</option>
                <option value="8">8.0x</option>
                <option value="16">16.0x üî•</option>
            </select>
        </div>

        <div class="panel">
            <label>üñºÔ∏è Thumbnail</label>
            <img id="thumb-img" src="" alt="Thumbnail">
            <p id="thumb-msg">Nh·∫≠p link ƒë·ªÉ l·∫•y ·∫£nh</p>
            <a id="download-btn" href="#" target="_blank" class="btn-link">M·ªü ·∫£nh ch·∫•t l∆∞·ª£ng cao nh·∫•t</a>
        </div>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    let player;
    function processVideo() {
        const url = document.getElementById('video-url').value;
        const id = url.match(/(?:youtu\.be\/|youtube\.com.*v=)([a-zA-Z0-9_-]{11})/)?.[1];
        if (!id) return alert("Link sai r·ªìi bro!");

        // 1. Player
        if (player) { player.loadVideoById(id); } 
        else { player = new YT.Player('player', { height: '100%', width: '100%', videoId: id, playerVars: { 'origin': location.origin } }); }

        // 2. Thumbnail Logic (Fix l·ªói c·ªßa √¥ng)
        const img = document.getElementById('thumb-img');
        const btn = document.getElementById('download-btn');
        const msg = document.getElementById('thumb-msg');
        
        const maxRes = `https://i.ytimg.com/vi/${id}/maxresdefault.jpg`;
        const hqRes = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;

        // Th·ª≠ load ·∫£nh HD
        img.src = maxRes;
        
        img.onload = function() {
            // Ki·ªÉm tra xem YouTube c√≥ tr·∫£ v·ªÅ ·∫£nh "·∫£nh kh√¥ng t·ªìn t·∫°i" (r·ªông 120px) kh√¥ng
            if (this.naturalWidth === 120) {
                this.src = hqRes;
                btn.href = hqRes;
            } else {
                btn.href = maxRes;
            }
            img.style.display = 'block';
            btn.style.display = 'inline-block';
            msg.style.display = 'none';
        };

        img.onerror = function() {
            this.src = hqRes;
            btn.href = hqRes;
            img.style.display = 'block';
            btn.style.display = 'inline-block';
            msg.style.display = 'none';
        };
    }

    function applySpeed() {
        const s = document.getElementById('speed-picker').value;
        if (player && player.setPlaybackRate) player.setPlaybackRate(parseFloat(s));
    }
</script>
</body>
</html>
